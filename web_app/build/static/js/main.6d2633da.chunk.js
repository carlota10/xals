(this.webpackJsonpweb_app=this.webpackJsonpweb_app||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){},163:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(30),i=n.n(r),s=(n(101),n(60)),o=n(39),l={en:{translation:{new:"new"}},es:{translation:{new:"nuevo"}}};s.a.use(o.e).init({resources:l,lng:"en",interpolation:{escapeValue:!1}});var d=s.a,u=(n(102),n(31)),b=n(8);var j=function(){return"Not found"},h=n(3),m=n(7),x=n(4),v=n(1),f="restaurantAdmin",O="superAdmin",g=a.a.createContext({type:null,setType:function(e){},params:{},setParams:function(e){},loggedIn:!1,isRestaurantAdminLoggedIn:!1,isSuperAdminLoggedIn:!1}),p=function(e){var t=e.children,n=Object(c.useState)(null),a=Object(x.a)(n,2),r=a[0],i=a[1],s=Object(c.useState)({}),o=Object(x.a)(s,2),l={type:r,setType:i,params:o[0],setParams:o[1],loggedIn:null!==r,isRestaurantAdminLoggedIn:r===f,isSuperAdminLoggedIn:r===O};return Object(v.jsx)(g.Provider,{value:l,children:t})},w=["component","type"];var k=function(e){var t=e.component,n=e.type,c=void 0===n?null:n,r=Object(m.a)(e,w),i=a.a.useContext(g);return Object(v.jsx)(b.b,Object(h.a)(Object(h.a)({},r),{},{render:function(e){return!i.loggedIn||null!==c&&!c.includes(i.type)?Object(v.jsx)(b.a,{to:{pathname:"/login",state:{from:e.location}}}):Object(v.jsx)(t,Object(h.a)(Object(h.a)({},e),r))}}))},y=n(19),C=n(6),N=n(13),S=["attributes","children"],L={"p-6":!0,"m-4":!0,"max-w-sm":!1,"bg-white":!0,"inline-block":!1,"rounded-md":!0,"shadow-lg":!0,"overflow-auto":!0};var F=function(e){var t=e.attributes,n=void 0===t?L:t,c=e.children,a=void 0===c?null:c,r=Object(m.a)(e,S);return Object(v.jsx)("div",Object(h.a)(Object(h.a)({className:Object(N.a)(Object(h.a)(Object(h.a)({},L),n))},r),{},{children:a}))},T=["attributes"],M={"flex-grow w-full sm:w-1/2 lg:w-1/3 xl:w-1/4":!0,"h-36":!0,"cursor-pointer":!0,"transform transition":!0,"select-none":!0};var P=function(e){var t=e.attributes,n=void 0===t?M:t,c=Object(m.a)(e,T);return Object(v.jsx)(F,Object(h.a)({attributes:Object(h.a)(Object(h.a)({},M),n)},c))},D=function(e){return function(e,t){if(t<=0)throw"n must be > 0, '".concat(t,"' is an invalid padding");return String(e).padStart(t,"0")}(e,2)},I=["hours","minutes","seconds","milliseconds"],H=function(e,t){if(!I.includes(t))throw"precision '".concat(t,"' is not a valid precision; must be one of ").concat(I);var n=e.map(D),c=Object(x.a)(n,4),a=c[0],r=c[1],i=c[2],s=c[3];switch(t){case I[0]:return a;case I[1]:return"".concat(a,":").concat(r);case I[2]:return"".concat(a,":").concat(r,":").concat(i);case I[3]:return"".concat(a,":").concat(r,":").concat(i,":").concat(s)}};function A(e){var t,n=e.startTime,a=e.refreshIntervalMs,r=void 0===a?1e3:a,i=e.precision,s=void 0===i?"seconds":i,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=Object(c.useState)(e),a=Object(x.a)(n,2),r=a[0],i=a[1];return Object(c.useEffect)((function(){var e=setInterval((function(){return i(new Date)}),t);return function(){return clearInterval(e)}}),[t]),[r-e]}(n,r),l=Object(x.a)(o,1)[0],d=(t=l,[Math.floor(t/36e5%24),Math.floor(t/6e4%60),Math.floor(t/1e3%60),Math.floor(t%1e3)]);return Object(v.jsx)("span",{children:H(d,s)})}var q="bg-gray-50 dark:bg-gray-800",E="bg-gray-50 active:hover:bg-gray-100 dark:bg-gray-800 active:hover:dark:bg-gray-600",R="bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-600",z="bg-gray-100 dark:bg-gray-700",W="bg-gray-200 dark:bg-gray-600",B="text-gray-800 dark:text-gray-50",V="text-gray-700 dark:text-gray-100",U="text-gray-900 dark:text-white",X=["handleHide","children","bgOverlay","bgOpacity","bg","z","disabled"];var G=function(e){var t=e.handleHide,n=void 0===t?function(){}:t,c=e.children,a=void 0===c?null:c,r=e.bgOverlay,i=void 0===r?"bg-gray-500":r,s=e.bgOpacity,o=void 0===s?"bg-opacity-75":s,l=e.bg,d=void 0===l?q:l,u=e.z,b=void 0===u?"z-10":u,j=e.disabled,x=void 0!==j&&j,f=Object(m.a)(e,X);return Object(v.jsx)("div",Object(h.a)(Object(h.a)({},f),{},{className:"fixed ".concat(b," inset-0 overflow-y-auto"),"aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:Object(v.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(v.jsx)("div",{className:"fixed inset-0 ".concat(i," ").concat(o," transition-opacity"),"aria-hidden":"true",onClick:function(){x||n()}}),Object(v.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(v.jsx)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:Object(v.jsx)("div",{className:"".concat(d," px-4 pt-5 pb-4 sm:p-6 sm:pb-4"),children:a})})]})}))},Y=["text","bgColor","textColor","ring","border","attributes","onClick","w","loading"],_={"m-1":!0,"inline-flex":!0,"justify-center":!0,"rounded-md":!0,border:!1,"shadow-sm":!0,"px-4":!0,"py-2":!0,"text-base":!0,"font-medium":!0,"text-white":!0,"focus:outline-none":!0,"focus:ring-2":!0,"focus:ring-offset-2":!0,"sm:ml-3":!0,"sm:text-sm":!0,"disabled:opacity-50":!0,"select-none":!0};function Z(e){var t,n=e.text,c=e.bgColor,a=void 0===c?E:c,r=e.textColor,i=void 0===r?B:r,s=e.ring,o=void 0===s?"focus:ring-gray-500":s,l=e.border,d=void 0===l?q:l,u=e.attributes,b=void 0===u?_:u,j=e.onClick,x=void 0===j?function(){}:j,f=e.w,O=void 0===f?"w-full sm:w-auto":f,g=e.loading,p=void 0!==g&&g,w=Object(m.a)(e,Y);return Object(v.jsxs)("button",Object(h.a)(Object(h.a)({onClick:x,type:"button",className:Object(N.a)(Object(h.a)(Object(h.a)({},_),{},(t={},Object(C.a)(t,a,!0),Object(C.a)(t,i,!0),Object(C.a)(t,o,!0),Object(C.a)(t,O,!0),Object(C.a)(t,d,!0),t),b))},w),{},{children:[p&&Object(v.jsx)("span",{className:"animate-ping absolute inline-flex h-5 w-5 rounded-full opacity-75 ".concat(z)}),n]}))}var J=["attributes","text","onClick"];function K(e){var t=e.attributes,n=void 0===t?{}:t,c=e.text,a=void 0===c?"no":c,r=e.onClick,i=void 0===r?function(){}:r,s=Object(m.a)(e,J);return Object(v.jsx)(Z,Object(h.a)({onClick:i,text:a,bgColor:"bg-red-600 hover:active:bg-red-700",textColor:"text-white",ring:"focus:ring-red-500",border:"border-transparent",attributes:n},s))}var Q=["handleHide","title","description","actions","children","icon","disabled"];var $=function(e){var t=e.handleHide,n=void 0===t?function(){}:t,c=e.title,a=void 0===c?null:c,r=e.description,i=void 0===r?null:r,s=e.actions,o=void 0===s?null:s,l=e.children,d=void 0===l?null:l,u=e.icon,b=void 0===u?null:u,j=e.disabled,x=void 0!==j&&j,f=Object(m.a)(e,Q);return Object(v.jsxs)(G,Object(h.a)(Object(h.a)({handleHide:n,disabled:x},f),{},{children:[Object(v.jsxs)("div",{className:"px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[(a||i)&&Object(v.jsxs)("div",{className:"sm:flex sm:items-start",children:[b&&Object(v.jsx)("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:b}),Object(v.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[a&&Object(v.jsx)("h3",{className:"text-lg leading-6 font-medium ".concat(U),id:"modal-title",children:a}),i&&Object(v.jsx)("div",{className:"mt-2",children:Object(v.jsx)("p",{className:"text-sm ".concat(B),children:i})})]})]}),d]}),o&&Object(v.jsx)("div",{className:"".concat(z," px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-lg"),children:o})]}))},ee=["title","description","cancel","confirm","handleSuccess","handleCancel"];var te=function(e){var t=e.title,n=void 0===t?"Do you wish to continue?":t,c=e.description,r=void 0===c?"this action might not be easily undone":c,i=e.cancel,s=void 0===i?"cancel":i,o=e.confirm,l=void 0===o?"confirm":o,d=e.handleSuccess,u=void 0===d?function(){}:d,b=e.handleCancel,j=void 0===b?function(){}:b;return Object(m.a)(e,ee),Object(v.jsx)($,{handleHide:j,title:n,description:r,icon:Object(v.jsx)("svg",{className:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),actions:Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)(K,{text:s,onClick:j}),Object(v.jsx)(Z,{text:l,onClick:u})]})})},ne=a.a.createContext((function(e,t,n,c){})),ce=function(e){var t=e.children,n=Object(c.useState)(!1),r=Object(x.a)(n,2),i=r[0],s=r[1],o=function(){return s(!1)},l=Object(c.useState)({title:void 0,description:void 0,handleSuccess:o,handleCancel:o}),d=Object(x.a)(l,2),u=d[0],b=d[1];return Object(v.jsxs)(a.a.Fragment,{children:[i&&Object(v.jsx)(te,{title:u.title,description:u.description,handleSuccess:u.handleSuccess,handleCancel:u.handleCancel}),Object(v.jsx)(ne.Provider,{value:function(e){var t=e.title,n=void 0===t?void 0:t,c=e.description,a=void 0===c?void 0:c,r=e.handleSuccess,i=void 0===r?function(){}:r,l=e.handleCancel,d=void 0===l?function(){}:l;s(!0),b({title:n,description:a,handleSuccess:function(){o(),i()},handleCancel:function(){o(),d()}})},children:t})]})},ae=["attributes","text","onClick"];function re(e){var t=e.attributes,n=void 0===t?{}:t,c=e.text,a=void 0===c?"yes":c,r=e.onClick,i=void 0===r?function(){}:r,s=Object(m.a)(e,ae);return Object(v.jsx)(Z,Object(h.a)({onClick:i,text:a,bgColor:"bg-green-500 active:hover:bg-green-600",textColor:"text-white",ring:"focus:ring-green-500",border:"border-transparent",attributes:n},s))}var ie=["table","handleHide","handleShow"];var se=function(e){var t=e.table,n=e.handleHide,c=void 0===n?function(){}:n,r=e.handleShow,i=void 0===r?function(){}:r,s=Object(m.a)(e,ie),o=a.a.useContext(ne);return Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)(te,{}),Object(v.jsx)($,Object(h.a)({handleHide:c,title:"Table ".concat(t.number),description:"last course was served at ".concat(D(t.lastCourseDatetime.getHours()),":").concat(D(t.lastCourseDatetime.getMinutes())),actions:Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)(K,{onClick:c,text:"cancel"}),Object(v.jsx)(re,{onClick:function(){},text:t.nextCourse}),Object(v.jsx)(Z,{onClick:function(){c(),o({handleSuccess:function(){},handleCancel:function(){i()}})},text:"finish"})]})},s))]})},oe=["table"];var le=function(e){var t,n=e.table,r=Object(m.a)(e,oe),i=Object(c.useState)(!1),s=Object(x.a)(i,2),o=s[0],l=s[1],d=function(){return l(!0)},u="alarm"===(t=n.status)?{bg:"bg-red-400 hover:bg-red-500",fg:"bg-red-100",text:"text-gray-800"}:"warning"===t?{bg:"bg-yellow-200 hover:bg-yellow-300",fg:"bg-yellow-100",text:"text-gray-800"}:{bg:"bg-green-200 hover:bg-green-300",fg:"bg-green-50",text:"text-gray-800"};return Object(v.jsxs)(a.a.Fragment,{children:[o&&Object(v.jsx)(se,{handleHide:function(){return l(!1)},handleShow:d,table:n}),Object(v.jsx)(P,Object(h.a)(Object(h.a)({attributes:Object(C.a)({},u.bg,!0),onClick:d},r),{},{children:Object(v.jsxs)("div",{className:"flex space-x-4 ".concat(u.text),children:[Object(v.jsxs)("div",{className:"flex-2 flex flex-col",children:[Object(v.jsx)("div",{className:"flex-1",children:Object(v.jsx)("p",{className:"font-mono text-4xl",children:Object(v.jsx)(A,{startTime:n.lastCourseDatetime,precision:"seconds"})})}),Object(v.jsx)("div",{className:"text-left",children:Object(v.jsx)("span",{className:"inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold mr-2 mb-2 bottom-0 left-0 ".concat(u.fg),children:n.nextCourse})})]}),Object(v.jsx)("div",{className:"flex-1",children:Object(v.jsx)("p",{className:"font-mono text-right text-8xl",children:n.number})})]})}))]})},de=n(175),ue=n(14),be=["name","label","type","lead","trail","placeholder"];function je(e){var t=e.name,n=e.label,c=void 0===n?null:n,a=e.type,r=void 0===a?"text":a,i=e.lead,s=void 0===i?null:i,o=e.trail,l=void 0===o?null:o,d=e.placeholder,u=void 0===d?"":d,b=Object(m.a)(e,be);return Object(v.jsx)(ue.a,{type:r,name:t,children:function(e){var n=e.field,a=e.form,i=(a.touched,a.errors,e.meta);return Object(v.jsxs)("div",{children:[c&&Object(v.jsx)("label",{for:t,className:"block text-sm font-medium text-gray-700",children:c}),i.touched&&i.error&&Object(v.jsx)("label",{for:t,className:"block text-sm font-medium text-red-700",children:i.error}),Object(v.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[s&&Object(v.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:Object(v.jsx)("span",{className:"".concat(V," sm:text-sm"),children:s})}),Object(v.jsx)("input",Object(h.a)(Object(h.a)({},b),{},{type:r,name:t,id:t,className:"block w-full p-2 ".concat(s?"pl-7":""," ").concat(l?"pr-7":""," sm:text-sm text-gray-900 rounded-md"),placeholder:u},n)),l&&Object(v.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pointer-events-none",children:Object(v.jsx)("span",{className:"".concat(V," sm:text-sm"),children:l})})]})]})}})}var he=["title","description","handleHide","handleShow","handleCancel","handleSubmit"];function me(e){var t=e.title,n=void 0===t?null:t,c=e.description,r=void 0===c?null:c,i=e.handleHide,s=void 0===i?function(){}:i,o=(e.handleShow,e.handleCancel),l=void 0===o?function(){}:o,d=e.handleSubmit,u=void 0===d?function(e){return new Promise.resolve}:d,b=Object(m.a)(e,he);return Object(v.jsx)(ue.c,{initialValues:{question:""},onSubmit:function(e,t){var n=t.setSubmitting,c=t.setErrors;u(e.question).then((function(){s(),n(!1)}),(function(){c({question:"unable to finalize request"}),n(!1)}))},children:function(e){var t=e.isSubmitting;return Object(v.jsx)(ue.b,{children:Object(v.jsx)($,Object(h.a)(Object(h.a)({handleHide:s,title:n,description:r,disabled:t,actions:Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)(K,{onClick:function(){s(),l()},text:"cancel",disabled:t}),Object(v.jsx)(re,{text:"submit",type:"submit",disabled:t,loading:t})]})},b),{},{children:Object(v.jsx)("div",{className:"p-4 pt-4",children:Object(v.jsx)(je,{name:"question"})})}))})}})}var xe=a.a.createContext({prompt:function(e,t,n,c){}}),ve=function(e){var t=e.children,n=Object(c.useState)(!1),r=Object(x.a)(n,2),i=r[0],s=r[1],o=function(){return s(!1)},l=function(){return s(!0)},d=Object(c.useState)({title:null,description:null,handleSubmit:o,handleCancel:o}),u=Object(x.a)(d,2),b=u[0],j=u[1];return Object(v.jsxs)(a.a.Fragment,{children:[i&&Object(v.jsx)(me,{title:b.title,description:b.description,handleSubmit:b.handleSubmit,handleCancel:b.handleCancel,handleHide:o,handleShow:l}),Object(v.jsx)(xe.Provider,{value:{prompt:function(e){var t=e.title,n=void 0===t?null:t,c=e.description,a=void 0===c?null:c,r=e.handleSubmit,i=void 0===r?function(){return new Promise.resolve}:r,s=e.handleCancel,d=void 0===s?function(){}:s;console.log(n,a),j({title:n,description:a,handleSubmit:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Promise((function(e,n){i.apply(void 0,t).then((function(){return e.apply(void 0,arguments)}),(function(){return n.apply(void 0,arguments)})).finally((function(){return o()}))}))},handleCancel:function(){o(),d()}}),l()}},children:t})]})},fe=["handleHide","handleShow","addNewTable","existingTableNumbers"];function Oe(e){var t=e.handleHide,n=void 0===t?function(){}:t,r=e.handleShow,i=void 0===r?function(){}:r,s=e.addNewTable,o=void 0===s?function(e){}:s,l=e.existingTableNumbers,d=void 0===l?[]:l,u=Object(m.a)(e,fe),b=function(e){return new Promise((function(t,c){setTimeout((function(){o({number:e,lastCourseDatetime:new Date,nextCourse:"first",status:"ok"}),n(),g(!1),t()}),5e3)}))},j=Object(c.useState)(!1),f=Object(x.a)(j,2),O=f[0],g=f[1],p=a.a.useContext(xe);return Object(v.jsx)(a.a.Fragment,{children:Object(v.jsx)($,Object(h.a)(Object(h.a)({handleHide:n,title:"new table2",description:"start timer for a new table",disabled:!1!==O,actions:Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)(K,{onClick:n,text:"cancel",disabled:!1!==O}),Object(v.jsx)(re,{onClick:function(){n(),p.prompt({title:"table #",handleSubmit:function(e){return new Promise((function(t,n){setTimeout(b(e).then((function(){return t()}),(function(){return n()})),3e3)}))},handleCancel:i})},text:"custom",disabled:!1!==O})]})},u),{},{children:Object(v.jsx)("div",{className:"p-1 pt-4",children:["15","0","12","111","1213","2","5","9"].filter((function(e){return!d.includes(e)})).map((function(e){return Object(v.jsx)(Z,{loading:O===e,disabled:!1!==O,onClick:function(){return g(t=e),void b(t);var t},text:e},e)}))})}))})}var ge=["addNewTable","existingTableNumbers"];var pe=function(e){var t,n=e.addNewTable,r=void 0===n?function(e){}:n,i=e.existingTableNumbers,s=void 0===i?[]:i,o=Object(m.a)(e,ge),l=Object(de.a)(),d=l.t,u=(l.i18n,Object(c.useState)(!1)),b=Object(x.a)(u,2),j=b[0],f=b[1],O=function(){return f(!0)};return Object(v.jsxs)(a.a.Fragment,{children:[j&&Object(v.jsx)(Oe,{handleHide:function(){return f(!1)},handleShow:O,addNewTable:r,existingTableNumbers:s}),Object(v.jsx)(P,Object(h.a)(Object(h.a)({onClick:O,attributes:(t={"border-4":!0,"border-dashed":!0},Object(C.a)(t,R,!0),Object(C.a)(t,B,!0),t)},o),{},{disabled:!1,children:Object(v.jsx)("div",{className:"h-full w-full flex flex-wrap content-center text-center justify-center",children:Object(v.jsx)("p",{className:"font-mono text-4xl",children:d("new")})})}))]})},we="priority",ke="number-ascending",ye="number-descending",Ce=[we,ke,ye];var Ne=function(e){var t=e.sort,n=e.setSort;return Object(v.jsx)("div",{className:"p-2 inline-block",children:Object(v.jsx)("div",{onClick:function(){return n(Ce[(Ce.indexOf(t)+1)%Ce.length])},className:"flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full cursor-pointer bg-gray-100 hover:bg-gray-200 sm:h-8 sm:w-8",children:Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t===we?Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"}):t===ke?Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"}):Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"})})})})},Se="light",Le="dark",Fe=[Se,Le],Te="theme",Me=a.a.createContext({theme:Se,setTheme:function(e){},setLight:function(){},setDark:function(){},toggle:function(){},isLight:!0,isDark:!1}),Pe=function(e){var t=e.children,n=Object(c.useState)(localStorage.getItem(Te)===Le?Le:Se),a=Object(x.a)(n,2),r=a[0],i=a[1],s=function(e){if(!Fe.includes(e))throw new Error("invalid theme '".concat(e,"' is not one of the valid options: '").concat(Fe,"'"));i(e),localStorage.setItem(Te,e)},o={theme:r,setTheme:s,setLight:function(){return s(Se)},setDark:function(){return s(Le)},toggle:function(){return s(Fe[(Fe.indexOf(r)+1)%Fe.length])},isLight:r===Se,isDark:r===Le};return Object(v.jsx)(Me.Provider,{value:o,children:Object(v.jsx)("div",{className:r===Le?"dark":void 0,children:t})})};function De(){var e=a.a.useContext(Me);return Object(v.jsx)("div",{className:"p-2 inline-block",children:Object(v.jsx)("div",{onClick:e.toggle,className:"flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full cursor-pointer bg-gray-100 hover:bg-gray-200 sm:h-8 sm:w-8",children:Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.isLight?Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"}):Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})})}var Ie="en",He=[Ie,"es"],Ae="language",qe=a.a.createContext({language:Ie,setLanguage:function(e){},toggle:function(){}}),Ee=function(e){var t=e.children,n=localStorage.getItem(Ae),a=Object(c.useState)(He.includes(n)?n:Ie),r=Object(x.a)(a,2),i=r[0],s=r[1],o=function(e){if(!He.includes(e))throw new Error("invalid language '".concat(e,"' is not one of the valid options: '").concat(He,"'"));s(e),localStorage.setItem(Ae,e),d.changeLanguage(e)},l={language:i,setLanguage:o,toggle:function(){return o(He[(He.indexOf(i)+1)%He.length])}};return Object(v.jsx)(qe.Provider,{value:l,children:t})};function Re(){var e=a.a.useContext(qe);return Object(v.jsx)("div",{className:"p-2 inline-block",children:Object(v.jsx)("div",{onClick:e.toggle,className:"flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full cursor-pointer bg-gray-100 hover:bg-gray-200 sm:h-8 sm:w-8",children:Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})})})})}var ze=n(90),We=n.n(ze);function Be(){return{"X-CSRFToken":We.a.get("X-CSRF-TOKEN")}}var Ve,Ue=n(29),Xe=n.n(Ue),Ge=n(11),Ye=function(e,t){var n=Object(Ge.b)(),a=n.enqueueSnackbar,r=(n.closeSnackbar,Object(c.useState)(!1)),i=Object(x.a)(r,2),s=i[0],o=i[1];return Object(c.useEffect)((function(){o(!1),function(e,t){return new Promise((function(n,c){Xe()({url:"".concat("https://localhost:4999","/auth/v1/login/accessToken"),method:"POST",auth:{username:e,password:t},headers:Object(h.a)({"Cache-Control":"no-cache"},Be())}).then((function(e){return n(!0)})).catch((function(e){try{401===e.response.status&&n(!1)}catch(t){}c(e)}))}))}(e,t).then((function(e){e?o(!0):a("you can't access this page",{variant:"warning"})})).catch((function(e){return a("something went wrong",{variant:"error"})}))}),[e,t]),[s,o]},_e=n(91),Ze=n.n(_e),Je=a.a.createContext({tables:[],restaurant:{}}),Ke=function(e){var t=e.children,n=Object(c.useState)([]),a=Object(x.a)(n,2),r=a[0],i=(a[1],Object(c.useState)({name:"..."})),s=Object(x.a)(i,2),o=s[0],l=(s[1],function(){var e=Object(b.h)().search;return[new URLSearchParams(e).get("id"),new URLSearchParams(e).get("token")]}()),d=Object(x.a)(l,2),u=d[0],j=d[1],h=Ye(u,j),m=Object(x.a)(h,2),f=m[0];m[1];Object(c.useEffect)((function(){if(f)return function(){var e=Ze()("https://localhost:4999");return e.on("FromAPI",(function(e){console.log(e)})),function(){return e.disconnect()}}()}),[f]);var O={tables:r,restautant:o};return Object(v.jsx)(Je.Provider,{value:O,children:t})},Qe=(Ve={},Object(C.a)(Ve,we,(function(e,t){return e.lastCourseDatetime-t.lastCourseDatetime})),Object(C.a)(Ve,ke,(function(e,t){return e.number-t.number})),Object(C.a)(Ve,ye,(function(e,t){return t.number-e.number})),Ve);function $e(){var e=["alarm","warning","random"];e.random=function(){return this[Math.floor(Math.random()*this.length)]};var t=Object(c.useState)(we),n=Object(x.a)(t,2),a=n[0],r=n[1],i=[12,14,15,2,18,21].map((function(t){var n=new Date;return n.setFullYear(2021,9,2),n.setHours(t,21-t,0,0),{number:(t-2).toString(),lastCourseDatetime:n,nextCourse:"desserts",status:e[Math.trunc(3*t/24)]}})),s=Object(c.useState)(i),o=Object(x.a)(s,2),l=o[0],d=o[1],u=function(e){e.sort(Qe[a]),d(e)};return Object(c.useEffect)((function(){return u(l)}),[a]),Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"p-2 pl-8 pr-8 inline-block w-full",children:[Object(v.jsx)("div",{className:"inline-block",children:Object(v.jsx)("p",{className:"font-mono text-4xl ".concat(B),children:"Restaurante 21"})}),Object(v.jsxs)("div",{className:"float-right",children:[Object(v.jsx)(Ne,{sort:a,setSort:r}),Object(v.jsx)(De,{}),Object(v.jsx)(Re,{})]})]}),Object(v.jsx)("div",{className:"px-4",children:Object(v.jsxs)("div",{className:"flex flex-wrap  -mx-4",children:[Object(v.jsx)(pe,{addNewTable:function(e){return u([].concat(Object(y.a)(l),[e]))},existingTableNumbers:l.map((function(e){return e.number}))}),l.map((function(e){return Object(v.jsx)(le,{table:e},e.number)}))]})})]})}var et=function(){return Object(v.jsx)(Ke,{children:Object(v.jsx)($e,{})})};function tt(e){var t=e.title,n=void 0===t?null:t,c=e.children,a=void 0===c?null:c;return Object(v.jsxs)("div",{className:"m-4 p-4 rounded-lg ".concat(W),children:[n&&Object(v.jsx)("p",{className:"font-mono select-none text-2xl ".concat(B),children:n}),Object(v.jsx)("div",{className:"p-4",children:a})]})}function nt(e){var t=e.privacyFilter,n=e.accessUrl,c=Object(Ge.b)(),a=c.enqueueSnackbar,r=(c.closeSnackbar,function(){t?a("disable the privacy mode on the top right corner first",{variant:"warning"}):(navigator.clipboard.writeText(n.url),a("the url has been copied to your clipboard, keep it private!",{variant:"success"}))});return Object(v.jsx)("div",{className:"py-4",children:Object(v.jsx)(ue.c,{initialValues:n,onSubmit:function(e,t){var n=t.setSubmitting,c=t.setErrors;console.log(e),(void e.comment).then((function(){n(!1)}),(function(){c({comment:"unable to finalize request"}),n(!1)}))},children:function(e){var n=e.isSubmitting;return Object(v.jsxs)(ue.b,{children:[Object(v.jsxs)("div",{className:"flex pt-2",children:[Object(v.jsx)("div",{className:"flex-grow",children:Object(v.jsx)(je,{name:"comment"})}),Object(v.jsx)(K,{text:"delete",disabled:n}),Object(v.jsx)(re,{text:"save",type:"submit",disabled:n,loading:n})]}),Object(v.jsx)("div",{className:"flex pb-2",children:Object(v.jsx)("div",{className:"flex-grow ".concat(t?"filter blur-sm":""),onClick:r,children:Object(v.jsx)(je,{name:"url",disabled:!0})})})]})}})})}function ct(e){var t=e.privacyFilter,n=e.setPrivacyFilter;return Object(v.jsx)("div",{className:"p-2 inline-block",children:Object(v.jsx)("div",{onClick:function(){return n(!t)},className:"flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full cursor-pointer bg-gray-100 hover:bg-gray-200 sm:h-8 sm:w-8",children:Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t?Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"}):Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})})}var at=n(92),rt=n(51);function it(e){Object(at.a)(e);var t=Object(Ge.b)(),n=t.enqueueSnackbar,c=(t.closeSnackbar,Object(b.g)()),a=Object(rt.useGoogleLogout)({clientId:"1065429339966-l7ud2am5kgeradurvb31bqujcqjpc8f2.apps.googleusercontent.com",onLogoutSuccess:function(){new Promise((function(e,t){Xe()({url:"".concat("https://localhost:4999","/auth/v1/logout"),method:"POST",headers:Object(h.a)({"Cache-Control":"no-cache"},Be())}).then((function(t){return e()})).catch((function(e){return t()}))})).then((function(){n("logged out",{variant:"success"}),c.push("/login")})).catch((function(){n("unable to log out with server",{variant:"error"})}))},onLogoutFailure:function(){n("unable to out with Google",{variant:"error"})}}).signOut;return Object(v.jsx)("div",{className:"p-2 inline-block",children:Object(v.jsx)("div",{onClick:a,className:"flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full cursor-pointer bg-gray-100 hover:bg-gray-200 sm:h-8 sm:w-8",children:Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(v.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})})}function st(e){var t=e.admin,n=e.privacyFilter,c=Object(Ge.b)(),r=c.enqueueSnackbar,i=(c.closeSnackbar,a.a.useContext(ne)),s=function(){i({handleSuccess:function(){r("administrator deleted",{variant:"warning"})},handleCancel:function(){r("administrator not deleted",{variant:"success"})}})};return Object(v.jsx)("div",{className:"py-4",children:Object(v.jsx)(ue.c,{initialValues:t,onSubmit:function(e,t){var n=t.setSubmitting,c=t.setErrors;console.log(e),(void e.name).then((function(){n(!1)}),(function(){c({comment:"unable to finalize request"}),n(!1)}))},children:function(e){var t=e.isSubmitting;return Object(v.jsx)(ue.b,{children:Object(v.jsxs)("div",{className:"flex pt-2",children:[Object(v.jsx)("div",{className:"flex-grow ".concat(n?"filter blur-sm":""),children:Object(v.jsx)(je,{disabled:!0,name:"email"})}),Object(v.jsx)(K,{text:"delete",onClick:s,disabled:t})]})})}})})}var ot=function(e){var t=e.privacyFilter,n=a.a.useContext(ne),r=a.a.useContext(xe),i=a.a.useContext(g),s=Object(c.useState)([12,14,15,2,18,21]),o=Object(x.a)(s,2),l=o[0],d=o[1];return Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsxs)(tt,{title:"default tables",children:[l.map((function(e){return Object(v.jsx)(Z,{onClick:function(){return function(e){n({title:"Do you want to delete Table ".concat(e,"?"),description:"Deleting Table ".concat(e," will only remove it from the default tables list."),handleSuccess:function(){return d(l.filter((function(t){return t!==e})))}})}(e)},text:e},e)})),Object(v.jsx)(re,{onClick:function(){r.prompt({title:"table #",description:"what is the name of the new table you want to add?",handleSubmit:function(e){l.includes(e)||d([].concat(Object(y.a)(l),[e]))}})},text:"ADD NEW"})]}),Object(v.jsxs)(tt,{title:"access URLs",children:[Object(v.jsxs)("div",{className:"grid grid-cols-1 divide-y divide-gray-500 dark:divide-gray-100",children:[Object(v.jsx)(nt,{privacyFilter:t,accessUrl:{url:"https://xals.herokuapp.com/app/restaurant?id=XYZ&token=ZYX",comment:"cocina y camarerxs"}}),Object(v.jsx)(nt,{privacyFilter:t,accessUrl:{url:"https://xals.herokuapp.com/app/restaurant?id=XYZ2&token=ZYX2",comment:"recepci\xf3n"}})]}),Object(v.jsx)("div",{className:"grid justify-items-center  pt-8",children:Object(v.jsx)(re,{onClick:function(){},text:"new",w:"w-64"})})]}),i.isSuperAdminLoggedIn&&Object(v.jsxs)(tt,{title:"restaurant administrators",children:[Object(v.jsxs)("div",{className:"grid grid-cols-1 divide-y divide-gray-500",children:[Object(v.jsx)(st,{admin:{email:"admin@gmail.com",id:"ad22"},privacyFilter:t}),Object(v.jsx)(st,{admin:{email:"admin2@gmail.com",id:"ad23"},privacyFilter:t})]}),Object(v.jsx)("div",{className:"grid justify-items-center  pt-8",children:Object(v.jsx)(re,{onClick:function(){},text:"ADD NEW",w:"w-64"})})]})]})};function lt(e){var t=e.restaurant,n=e.setRestaurant,c=Object(Ge.b)(),r=c.enqueueSnackbar,i=(c.closeSnackbar,a.a.useContext(ne)),s=function(){i({handleSuccess:function(){r("restaurant deleted",{variant:"warning"})},handleCancel:function(){r("restaurant not deleted",{variant:"success"})}})},o=function(){return n(t)};return Object(v.jsx)("div",{className:"py-4",children:Object(v.jsx)(ue.c,{initialValues:t,onSubmit:function(e,t){var n=t.setSubmitting,c=t.setErrors;console.log(e),(void e.name).then((function(){n(!1)}),(function(){c({comment:"unable to finalize request"}),n(!1)}))},children:function(e){var t=e.isSubmitting;return Object(v.jsx)(ue.b,{children:Object(v.jsxs)("div",{className:"flex pt-2",children:[Object(v.jsx)("div",{className:"flex-grow",children:Object(v.jsx)(je,{name:"name"})}),Object(v.jsx)(K,{text:"delete",onClick:s,disabled:t}),Object(v.jsx)(re,{text:"save",type:"submit",disabled:t,loading:t}),Object(v.jsx)(Z,{text:"admin",onClick:o,disabled:t})]})})}})})}var dt=function(e){var t=e.privacyFilter,n=e.setRestaurant,r=Object(c.useState)([]),i=Object(x.a)(r,2),s=(i[0],i[1]),o=Object(Ge.b)(),l=o.enqueueSnackbar;return o.closeSnackbar,Object(c.useEffect)((function(){new Promise((function(e,t){Xe()({url:"".concat("https://localhost:4999","/api/v1/restaurants"),method:"GET",headers:Object(h.a)({"Cache-Control":"no-cache"},Be())}).then((function(t){return e(t.data.restaurants)})).catch((function(e){return t()}))})).then((function(e){return s(e)})).catch((function(e){return l("unable to retrieve restaurants",{variant:"error"})}))})),Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsxs)(tt,{title:"restaurants",children:[Object(v.jsxs)("div",{className:"grid grid-cols-1 divide-y divide-gray-500",children:[Object(v.jsx)(lt,{restaurant:{name:"restaurant a21",id:"a21"},setRestaurant:n}),Object(v.jsx)(lt,{restaurant:{name:"restaurant a22",id:"a22"},setRestaurant:n})]}),Object(v.jsx)("div",{className:"grid justify-items-center pt-8",children:Object(v.jsx)(re,{onClick:function(){},text:"ADD NEW",w:"w-64"})})]}),Object(v.jsxs)(tt,{title:"root administrators",children:[Object(v.jsxs)("div",{className:"grid grid-cols-1 divide-y divide-gray-500",children:[Object(v.jsx)(st,{admin:{email:"admin@gmail.com",id:"ad22"},privacyFilter:t}),Object(v.jsx)(st,{admin:{email:"admin2@gmail.com",id:"ad23"},privacyFilter:t})]}),Object(v.jsx)("div",{className:"grid justify-items-center  pt-8",children:Object(v.jsx)(re,{onClick:function(){},text:"ADD NEW",w:"w-64"})})]})]})};function ut(e){var t=e.setRestaurant;return Object(v.jsx)("div",{className:"p-2 inline-block",children:Object(v.jsx)("div",{onClick:function(){return t(null)},className:"flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full cursor-pointer bg-gray-100 hover:bg-gray-200 sm:h-8 sm:w-8",children:Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 15l-3-3m0 0l3-3m-3 3h8M3 12a9 9 0 1118 0 9 9 0 01-18 0z"})})})})}var bt=function(){var e,t=a.a.useContext(g),n=Object(c.useState)(!0),r=Object(x.a)(n,2),i=r[0],s=r[1],o=Object(c.useState)(null),l=Object(x.a)(o,2),d=l[0],u=l[1];return console.log(d,t.params),Object(c.useEffect)((function(){null!==t.params.restaurantId?u({id:t.params.restaurantId,name:t.params.restaurantName}):u(null)}),[t.params]),Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"p-2 pl-8 pr-8",children:[Object(v.jsx)("div",{className:"inline-block",children:Object(v.jsx)("p",{className:"font-mono text-4xl ".concat(B),children:t.isSuperAdminLoggedIn&&null===d?"root admin":null!==(e=d.name)&&void 0!==e?e:"..."})}),Object(v.jsxs)("div",{className:"float-right",children:[t.isSuperAdminLoggedIn&&null!==d&&Object(v.jsx)(ut,{setRestaurant:u}),Object(v.jsx)(De,{}),Object(v.jsx)(Re,{}),Object(v.jsx)(ct,{privacyFilter:i,setPrivacyFilter:s}),Object(v.jsx)(it,{})]})]}),Object(v.jsxs)("div",{className:"inline-block w-full",children:[(t.isRestaurantAdminLoggedIn||null!==d)&&Object(v.jsx)(ot,{privacyFilter:i,restaurant:d}),t.isSuperAdminLoggedIn&&null===d&&Object(v.jsx)(dt,{privacyFilter:i,setRestaurant:u})]})]})},jt="1065429339966-l7ud2am5kgeradurvb31bqujcqjpc8f2.apps.googleusercontent.com";var ht=function(){var e=Object(Ge.b)().enqueueSnackbar,t=a.a.useContext(g),n=Object(b.g)(),c=Object(b.h)();return console.log(jt),Object(v.jsx)("div",{className:"flex items-center justify-center h-screen",children:Object(v.jsx)(rt.GoogleLogin,{clientId:jt,buttonText:"Login",onSuccess:function(a){var r;(r=a.tokenObj.id_token,new Promise((function(e,t){Xe()({url:"".concat("https://localhost:4999","/auth/v1/login/google"),method:"POST",auth:{username:"",password:r},headers:Object(h.a)({"Cache-Control":"no-cache"},Be())}).then((function(t){return e([!0,t.data])})).catch((function(n){try{401===n.response.status&&e(!1)}catch(c){}t(n)}))}))).then((function(a){var r=Object(x.a)(a,2),i=r[0],s=r[1];if(i){t.setType(s.type),t.setParams(s);var o=(c.state||{from:{pathname:"/admin"}}).from;n.push(o),e("logged in",{variant:"success"})}else e("user does not exist",{variant:"warning"})})).catch((function(){e("unable to log in with the server",{variant:"error"})}))},onFailure:function(t){e("unable to log in with Google",{variant:"error"})},cookiePolicy:"single_host_origin"})})};var mt=function(){var e=a.a.createRef();return Object(v.jsx)(Pe,{children:Object(v.jsx)("div",{className:"App ".concat(q," min-h-screen min-w-screen"),children:Object(v.jsx)(Ee,{children:Object(v.jsx)(Ge.a,{children:Object(v.jsx)(p,{children:Object(v.jsx)(ce,{children:Object(v.jsx)(ve,{children:Object(v.jsx)(u.a,{ref:e,basename:"/app",children:Object(v.jsxs)(b.d,{children:[Object(v.jsx)(k,{path:"/admin",baseRouter:e,component:bt,type:[f,O]}),Object(v.jsx)(b.b,{path:"/restaurant",component:et}),Object(v.jsx)(b.b,{path:"/login",component:ht}),Object(v.jsx)(b.b,{component:j})]})})})})})})})})})},xt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,176)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};i.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(mt,{})}),document.getElementById("root")),xt()}},[[163,1,2]]]);
//# sourceMappingURL=main.6d2633da.chunk.js.map