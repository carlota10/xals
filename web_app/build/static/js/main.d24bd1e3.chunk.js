(this.webpackJsonpweb_app=this.webpackJsonpweb_app||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},165:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(30),i=n.n(c),o=(n(103),n(62)),s=n(39),l={en:{translation:{new:"new"}},es:{translation:{new:"nuevo"}}};o.a.use(s.e).init({resources:l,lng:"en",interpolation:{escapeValue:!1}});var u=o.a,d=(n(104),n(31)),b=n(9);var j=function(){return"Not found"},f=n(3),h=n(8),m=n(4),v=n(1),x="accessToken",O="restaurantAdmin",g="superAdmin",p=a.a.createContext({type:null,setType:function(e){},params:{},setParams:function(e){},loggedIn:!1,isRestaurantAdminLoggedIn:!1,isSuperAdminLoggedIn:!1}),w=function(e){var t=e.children,n=Object(r.useState)(null),a=Object(m.a)(n,2),c=a[0],i=a[1],o=Object(r.useState)({}),s=Object(m.a)(o,2),l={type:c,setType:i,params:s[0],setParams:s[1],loggedIn:null!==c,isRestaurantAdminLoggedIn:c===O,isSuperAdminLoggedIn:c===g};return Object(v.jsx)(p.Provider,{value:l,children:t})},k=["component","type"];var y=function(e){var t=e.component,n=e.type,r=void 0===n?null:n,c=Object(h.a)(e,k),i=a.a.useContext(p);return Object(v.jsx)(b.b,Object(f.a)(Object(f.a)({},c),{},{render:function(e){return!i.loggedIn||null!==r&&!r.includes(i.type)?Object(v.jsx)(b.a,{to:{pathname:"/login",state:{from:e.location}}}):Object(v.jsx)(t,Object(f.a)(Object(f.a)({},e),c))}}))},C=n(13),S=n(5),N=n(15),T=["attributes","children"],L={"p-6":!0,"max-w-sm":!1,"bg-white":!0,"inline-block":!1,"rounded-md":!0,"shadow-lg":!0,"overflow-auto":!0};var E=function(e){var t=e.attributes,n=void 0===t?L:t,r=e.children,a=void 0===r?null:r,c=Object(h.a)(e,T);return Object(v.jsx)("div",Object(f.a)(Object(f.a)({className:Object(N.a)(Object(f.a)(Object(f.a)({},L),n))},c),{},{children:a}))},P=["attributes"],I={"w-full":!0,"h-36":!0,"cursor-pointer":!0,"transform transition":!0,"select-none":!0};var _=function(e){var t=e.attributes,n=void 0===t?I:t,r=Object(h.a)(e,P);return Object(v.jsx)(E,Object(f.a)({attributes:Object(f.a)(Object(f.a)({},I),n)},r))},F=n(49),M=function(e){return function(e,t){if(t<=0)throw"n must be > 0, '".concat(t,"' is an invalid padding");return String(e).padStart(t,"0")}(e,2)},q=["hours","minutes","seconds","milliseconds"],A=function(e,t){if(!q.includes(t))throw"precision '".concat(t,"' is not a valid precision; must be one of ").concat(q);var n=e.map(M),r=Object(m.a)(n,4),a=r[0],c=r[1],i=r[2],o=r[3];switch(t){case q[0]:return a;case q[1]:return"".concat(a,":").concat(c);case q[2]:return"".concat(a,":").concat(c,":").concat(i);case q[3]:return"".concat(a,":").concat(c,":").concat(i,":").concat(o)}};function H(e){var t,n=e.startTime,a=e.notifyDelta,c=void 0===a?function(e){}:a,i=e.refreshIntervalMs,o=void 0===i?1e3:i,s=e.precision,l=void 0===s?"seconds":s,u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=Object(r.useState)(e.toUTC()),a=Object(m.a)(n,2),c=a[0],i=a[1],o=Object(r.useState)(e.toUTC()),s=Object(m.a)(o,2),l=s[0],u=s[1];return Object(r.useEffect)((function(){i(e)}),[e]),Object(r.useEffect)((function(){var e=setInterval((function(){return u(F.DateTime.now().toUTC())}),t);return function(){return clearInterval(e)}}),[t]),[l-c]}(n,o),d=Object(m.a)(u,1)[0],b=(t=d,[Math.floor(t/36e5%24),Math.floor(t/6e4%60),Math.floor(t/1e3%60),Math.floor(t%1e3)]);return Object(r.useEffect)((function(){c(d)}),[d]),Object(v.jsx)("span",{children:A(b,l)})}var D="bg-gray-50 dark:bg-gray-800",R="bg-gray-50 active:hover:bg-gray-100 dark:bg-gray-800 active:hover:dark:bg-gray-600",z="bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-600",W="bg-gray-100 dark:bg-gray-700",V="bg-gray-200 dark:bg-gray-600",B="text-gray-800 dark:text-gray-50",U="text-gray-700 dark:text-gray-100",G="text-gray-900 dark:text-white",J=["handleHide","children","bgOverlay","bgOpacity","bg","z","disabled"];var X=function(e){var t=e.handleHide,n=void 0===t?function(){}:t,r=e.children,a=void 0===r?null:r,c=e.bgOverlay,i=void 0===c?"bg-gray-500":c,o=e.bgOpacity,s=void 0===o?"bg-opacity-75":o,l=e.bg,u=void 0===l?D:l,d=e.z,b=void 0===d?"z-10":d,j=e.disabled,m=void 0!==j&&j,x=Object(h.a)(e,J);return Object(v.jsx)("div",Object(f.a)(Object(f.a)({},x),{},{className:"fixed ".concat(b," inset-0 overflow-y-auto"),"aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:Object(v.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(v.jsx)("div",{className:"fixed inset-0 ".concat(i," ").concat(s," transition-opacity"),"aria-hidden":"true",onClick:function(){m||n()}}),Object(v.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(v.jsx)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:Object(v.jsx)("div",{className:"".concat(u," px-4 pt-5 pb-4 sm:p-6 sm:pb-4"),children:a})})]})}))},K=["text","bgColor","textColor","ring","border","attributes","onClick","w","loading"],Q={"m-1":!0,"inline-flex":!0,"justify-center":!0,"rounded-md":!0,border:!1,"shadow-sm":!0,"px-4":!0,"py-2":!0,"text-base":!0,"font-medium":!0,"text-white":!0,"focus:outline-none":!0,"focus:ring-2":!0,"focus:ring-offset-2":!0,"sm:ml-3":!0,"sm:text-sm":!0,"disabled:opacity-50":!0,"select-none":!0};function Y(e){var t,n=e.text,r=e.bgColor,a=void 0===r?R:r,c=e.textColor,i=void 0===c?B:c,o=e.ring,s=void 0===o?"focus:ring-gray-500":o,l=e.border,u=void 0===l?D:l,d=e.attributes,b=void 0===d?Q:d,j=e.onClick,m=void 0===j?function(){}:j,x=e.w,O=void 0===x?"w-full sm:w-auto":x,g=e.loading,p=void 0!==g&&g,w=Object(h.a)(e,K);return Object(v.jsxs)("button",Object(f.a)(Object(f.a)({onClick:m,type:"button",className:Object(N.a)(Object(f.a)(Object(f.a)({},Q),{},(t={},Object(S.a)(t,a,!0),Object(S.a)(t,i,!0),Object(S.a)(t,s,!0),Object(S.a)(t,O,!0),Object(S.a)(t,u,!0),t),b))},w),{},{children:[p&&Object(v.jsx)("span",{className:"animate-ping absolute inline-flex h-5 w-5 rounded-full opacity-75 ".concat(W)}),n]}))}var Z=["attributes","text","onClick"];function $(e){var t=e.attributes,n=void 0===t?{}:t,r=e.text,a=void 0===r?"no":r,c=e.onClick,i=void 0===c?function(){}:c,o=Object(h.a)(e,Z);return Object(v.jsx)(Y,Object(f.a)({onClick:i,text:a,bgColor:"bg-red-600 hover:active:bg-red-700",textColor:"text-white",ring:"focus:ring-red-500",border:"border-transparent",attributes:n},o))}var ee=["handleHide","title","description","actions","children","icon","disabled"];var te=function(e){var t=e.handleHide,n=void 0===t?function(){}:t,r=e.title,a=void 0===r?null:r,c=e.description,i=void 0===c?null:c,o=e.actions,s=void 0===o?null:o,l=e.children,u=void 0===l?null:l,d=e.icon,b=void 0===d?null:d,j=e.disabled,m=void 0!==j&&j,x=Object(h.a)(e,ee);return Object(v.jsxs)(X,Object(f.a)(Object(f.a)({handleHide:n,disabled:m},x),{},{children:[Object(v.jsxs)("div",{className:"px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[(a||i)&&Object(v.jsxs)("div",{className:"sm:flex sm:items-start",children:[b&&Object(v.jsx)("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:b}),Object(v.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[a&&Object(v.jsx)("h3",{className:"text-lg leading-6 font-medium ".concat(G),id:"modal-title",children:a}),i&&Object(v.jsx)("div",{className:"mt-2",children:Object(v.jsx)("p",{className:"text-sm ".concat(B),children:i})})]})]}),u]}),s&&Object(v.jsx)("div",{className:"".concat(W," px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-lg"),children:s})]}))},ne=["title","description","cancel","confirm","handleSuccess","handleCancel"];var re=function(e){var t=e.title,n=void 0===t?"Do you wish to continue?":t,r=e.description,c=void 0===r?"this action might not be easily undone":r,i=e.cancel,o=void 0===i?"cancel":i,s=e.confirm,l=void 0===s?"confirm":s,u=e.handleSuccess,d=void 0===u?function(){}:u,b=e.handleCancel,j=void 0===b?function(){}:b;return Object(h.a)(e,ne),Object(v.jsx)(te,{handleHide:j,title:n,description:c,icon:Object(v.jsx)("svg",{className:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),actions:Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)($,{text:o,onClick:j}),Object(v.jsx)(Y,{text:l,onClick:d})]})})},ae=a.a.createContext((function(e,t,n,r){})),ce=function(e){var t=e.children,n=Object(r.useState)(!1),c=Object(m.a)(n,2),i=c[0],o=c[1],s=function(){return o(!1)},l=Object(r.useState)({title:void 0,description:void 0,handleSuccess:s,handleCancel:s}),u=Object(m.a)(l,2),d=u[0],b=u[1];return Object(v.jsxs)(a.a.Fragment,{children:[i&&Object(v.jsx)(re,{title:d.title,description:d.description,handleSuccess:d.handleSuccess,handleCancel:d.handleCancel}),Object(v.jsx)(ae.Provider,{value:function(e){var t=e.title,n=void 0===t?void 0:t,r=e.description,a=void 0===r?void 0:r,c=e.handleSuccess,i=void 0===c?function(){}:c,l=e.handleCancel,u=void 0===l?function(){}:l;o(!0),b({title:n,description:a,handleSuccess:function(){s(),i()},handleCancel:function(){s(),u()}})},children:t})]})},ie=["attributes","text","onClick"];function oe(e){var t=e.attributes,n=void 0===t?{}:t,r=e.text,a=void 0===r?"yes":r,c=e.onClick,i=void 0===c?function(){}:c,o=Object(h.a)(e,ie);return Object(v.jsx)(Y,Object(f.a)({onClick:i,text:a,bgColor:"bg-green-500 active:hover:bg-green-600",textColor:"text-white",ring:"focus:ring-green-500",border:"border-transparent",attributes:n},o))}var se=n(89),le=n.n(se);function ue(){return{"X-CSRFToken":le.a.get("X-CSRF-TOKEN")}}var de=n(21),be=n.n(de),je=n(7),fe=function(e,t){var n=Object(je.b)(),c=n.enqueueSnackbar,i=(n.closeSnackbar,a.a.useContext(p));return Object(r.useEffect)((function(){i.setType(null),function(e,t){return new Promise((function(n,r){be()({url:"".concat("https://fb.unicohotels.com/","/auth/v1/login/accessToken"),method:"POST",auth:{username:e,password:t},headers:Object(f.a)({"Cache-Control":"no-cache"},ue())}).then((function(e){return n([!0,e.data])})).catch((function(e){try{401===e.response.status&&n([!1,null])}catch(t){}r(e)}))}))}(e,t).then((function(e){var t=Object(m.a)(e,2),n=t[0],r=t[1];n?(i.setType(x),i.setParams(r)):c("you can't access this page",{variant:"warning"})})).catch((function(e){return c("something went wrong",{variant:"error"})}))}),[e,t]),[i.loggedIn,function(){return i.setType(x)}]},he=n(90),me=function(e){return e.last_course_datetime=new F.DateTime.fromISO(e.last_course_datetime,{zone:"utc"}),e},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(r.useState)(e),n=Object(m.a)(t,2),a=n[0],c=n[1],i=function(e){return c((function(t){return[].concat(Object(C.a)(t),[e])}))},o=function(e){return c((function(t){return t.splice(e,1),c(Object(C.a)(t))}))};return{queue:a,push:i,serve:o,serveFirst:function(){return o(0)},serveAll:function(){return c([])},isEmpty:function(){return 0===a.length}}},xe=a.a.createContext({tables:[],setTables:function(e){},addTable:function(e){},finishTable:function(e){},nextCourse:function(e){},deleteTable:function(e){}}),Oe=function(e){var t=e.children,n=Object(je.b)().enqueueSnackbar,a=Object(r.useState)({}),c=Object(m.a)(a,2),i=c[0],o=c[1],s=function(){var e=Object(b.h)().search;return[new URLSearchParams(e).get("id"),new URLSearchParams(e).get("token")]}(),l=Object(m.a)(s,2),u=l[0],d=l[1],j=fe(u,d),h=Object(m.a)(j,2),x=h[0],O=(h[1],Object(r.useState)(null)),g=Object(m.a)(O,2),p=g[0],w=g[1];Object(r.useEffect)((function(){if(x){var e=Object(he.io)("https://fb.unicohotels.com/");return w(e),function(){return e.close()}}}),[x]),Object(r.useEffect)((function(){null!==p&&(p.on("v1.tables",(function(e){o(function(e){var t={};return e.forEach((function(e){t[e.id]=me(e)})),t}(e.tables))})),p.on("v1.tables.new",(function(e){o((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(S.a)({},e.table.id,me(e.table)))}))})),p.on("v1.tables.finish",(function(e){var t=e.table;o((function(e){return delete e[t.id],Object(f.a)({},e)})),n("table ".concat(t.number," has been marked as finished"),{variant:"success"})})),p.on("v1.tables.next",(function(e){var t=me(e.table);o((function(e){return e[t.id]=t,Object(f.a)({},e)})),n("table ".concat(t.number," has been served... now waiting for ").concat(t.next_course),{variant:"success"})})),p.on("v1.tables.delete",(function(e){var t=e.table;o((function(e){return delete e[t.id],Object(f.a)({},e)})),n("table ".concat(t.number," has been deleted"),{variant:"warning"})})))}),[p]);var k=ve();Object(r.useEffect)((function(){null!==p&&(k.isEmpty()||(k.queue.map((function(e){p.emit("v1.tables.new",{number:e})})),k.serveAll()))}),[k,p]);var y=ve();Object(r.useEffect)((function(){null!==p&&(y.isEmpty()||(y.queue.map((function(e){p.emit("v1.tables.finish",{id:e})})),y.serveAll()))}),[y,p]);var C=ve();Object(r.useEffect)((function(){null!==p&&(C.isEmpty()||(C.queue.map((function(e){p.emit("v1.tables.next",{id:e.id,name:e.name}),console.log(e)})),C.serveAll()))}),[C,p]);var N=ve();Object(r.useEffect)((function(){null!==p&&(N.isEmpty()||(N.queue.map((function(e){p.emit("v1.tables.delete",{id:e})})),N.serveAll()))}),[N,p]);var T={tables:Object.values(i),setTables:function(){},addTable:function(e){return k.push(e)},finishTable:function(e){return y.push(e)},nextCourse:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(i[e],i[e].next_course),C.push({id:e,name:t?"desserts":parseInt(i[e].next_course)+1})},deleteTable:function(e){return N.push(e)}};return Object(v.jsx)(xe.Provider,{value:T,children:t})},ge=["table","handleHide","handleShow"];var pe=function(e){var t=e.table,n=e.handleHide,r=void 0===n?function(){}:n,c=e.handleShow,i=void 0===c?function(){}:c,o=Object(h.a)(e,ge),s=a.a.useContext(ae),l=a.a.useContext(xe),u="desserts"===t.next_course,d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r(),u?s({title:"serve desserts and finalize table?",handleSuccess:function(){l.finishTable(t.id)},handleCancel:function(){i()}}):l.nextCourse(t.id,e)},b=t.last_course_datetime.toLocal();return Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)(re,{}),Object(v.jsx)(te,Object(f.a)({handleHide:r,title:"Table ".concat(t.number),description:"last course was served at ".concat(M(b.hour),":").concat(M(b.minute)),actions:Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)($,{onClick:r,text:"cancel"}),!u&&Object(v.jsx)(oe,{onClick:function(){return d(!0)},text:"desserts"}),Object(v.jsx)(oe,{onClick:function(){return d(!1)},text:u?"finalize":"next"}),Object(v.jsx)(Y,{onClick:function(){r(),s({handleSuccess:function(){l.deleteTable(t.id)},handleCancel:function(){i()}})},text:"delete"})]})},o))]})},we=["table"],ke="alarm",ye="warning";var Ce=function(e){var t=e.table,n=Object(h.a)(e,we),c=a.a.useContext(p),i=Object(r.useState)(!1),o=Object(m.a)(i,2),s=o[0],l=o[1],u=function(){return l(!0)},d=Object(r.useState)("ok"),b=Object(m.a)(d,2),j=b[0],x=b[1],O=function(e){return e===ke?{bg:"bg-red-400 hover:bg-red-500",fg:"bg-red-100",text:"text-gray-800"}:e===ye?{bg:"bg-yellow-200 hover:bg-yellow-300",fg:"bg-yellow-100",text:"text-gray-800"}:{bg:"bg-green-200 hover:bg-green-300",fg:"bg-green-50",text:"text-gray-800"}}(j);return Object(v.jsxs)(a.a.Fragment,{children:[s&&Object(v.jsx)(pe,{handleHide:function(){return l(!1)},handleShow:u,table:t}),Object(v.jsx)(_,Object(f.a)(Object(f.a)({attributes:Object(S.a)({},O.bg,!0),onClick:u},n),{},{children:Object(v.jsxs)("div",{className:"flex-2 flex flex-col ".concat(O.text),children:[Object(v.jsx)("div",{className:"flex-1",children:Object(v.jsx)("p",{className:"font-mono text-4xl",children:Object(v.jsx)(H,{startTime:t.last_course_datetime,notifyDelta:function(e){var t=e/6e4;return t>c.params.alarmMinutes?x(ke):t>c.params.warningMinutes?x(ye):void x("ok")},precision:"seconds"})})}),Object(v.jsxs)("div",{className:"flex space-x-4 pt-4",children:[Object(v.jsx)("div",{className:"text-left",children:Object(v.jsx)("span",{className:"inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold mr-2 mb-2 bottom-0 left-0 ".concat(O.fg),children:t.next_course})}),Object(v.jsx)("div",{className:"flex-1",children:Object(v.jsx)("p",{className:"font-mono text-right text-4xl",children:t.number})})]})]})}))]})},Se=n(177),Ne=n(12),Te=["name","label","type","lead","trail","placeholder"];function Le(e){var t=e.name,n=e.label,r=void 0===n?null:n,a=e.type,c=void 0===a?"text":a,i=e.lead,o=void 0===i?null:i,s=e.trail,l=void 0===s?null:s,u=e.placeholder,d=void 0===u?"":u,b=Object(h.a)(e,Te);return Object(v.jsx)(Ne.a,{type:c,name:t,children:function(e){var n=e.field,a=e.form,i=(a.touched,a.errors,e.meta);return Object(v.jsxs)("div",{children:[r&&Object(v.jsx)("label",{for:t,className:"block text-sm font-medium ".concat(B),children:r}),i.touched&&i.error&&Object(v.jsx)("label",{for:t,className:"block text-sm font-medium text-red-700",children:i.error}),Object(v.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[o&&Object(v.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:Object(v.jsx)("span",{className:"".concat(U," sm:text-sm"),children:o})}),Object(v.jsx)("input",Object(f.a)(Object(f.a)({},b),{},{type:c,name:t,id:t,className:"block w-full p-2 ".concat(o?"pl-7":""," ").concat(l?"pr-7":""," sm:text-sm text-gray-900 rounded-md"),placeholder:d},n)),l&&Object(v.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pointer-events-none",children:Object(v.jsx)("span",{className:"".concat(U," sm:text-sm"),children:l})})]})]})}})}var Ee=["title","description","handleHide","handleShow","handleCancel","handleSubmit"];function Pe(e){var t=e.title,n=void 0===t?null:t,r=e.description,c=void 0===r?null:r,i=e.handleHide,o=void 0===i?function(){}:i,s=(e.handleShow,e.handleCancel),l=void 0===s?function(){}:s,u=e.handleSubmit,d=void 0===u?function(e){return new Promise.resolve}:u,b=Object(h.a)(e,Ee);return Object(v.jsx)(Ne.c,{initialValues:{question:""},onSubmit:function(e,t){var n=t.setSubmitting,r=t.setErrors;d(e.question).then((function(){o(),n(!1)}),(function(){r({question:"unable to finalize request"}),n(!1)}))},children:function(e){var t=e.isSubmitting;return Object(v.jsx)(Ne.b,{children:Object(v.jsx)(te,Object(f.a)(Object(f.a)({handleHide:o,title:n,description:c,disabled:t,actions:Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)($,{onClick:function(){o(),l()},text:"cancel",disabled:t}),Object(v.jsx)(oe,{text:"submit",type:"submit",disabled:t,loading:t})]})},b),{},{children:Object(v.jsx)("div",{className:"p-4 pt-4",children:Object(v.jsx)(Le,{name:"question"})})}))})}})}var Ie=a.a.createContext({prompt:function(e,t,n,r){}}),_e=function(e){var t=e.children,n=Object(r.useState)(!1),c=Object(m.a)(n,2),i=c[0],o=c[1],s=function(){return o(!1)},l=function(){return o(!0)},u=Object(r.useState)({title:null,description:null,handleSubmit:s,handleCancel:s}),d=Object(m.a)(u,2),b=d[0],j=d[1];return Object(v.jsxs)(a.a.Fragment,{children:[i&&Object(v.jsx)(Pe,{title:b.title,description:b.description,handleSubmit:b.handleSubmit,handleCancel:b.handleCancel,handleHide:s,handleShow:l}),Object(v.jsx)(Ie.Provider,{value:{prompt:function(e){var t=e.title,n=void 0===t?null:t,r=e.description,a=void 0===r?null:r,c=e.handleSubmit,i=void 0===c?function(){return new Promise.resolve}:c,o=e.handleCancel,u=void 0===o?function(){}:o;j({title:n,description:a,handleSubmit:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Promise((function(e,n){i.apply(void 0,t).then((function(){e.apply(void 0,arguments),s()}),(function(){return n.apply(void 0,arguments)}))}))},handleCancel:function(){s(),u()}}),l()}},children:t})]})},Fe=["handleHide","handleShow","addNewTable","existingTableNumbers"],Me=function(e){var t;return null!==(t=parseInt(e))&&void 0!==t?t:e};function qe(e){var t=e.handleHide,n=void 0===t?function(){}:t,c=e.handleShow,i=void 0===c?function(){}:c,o=e.addNewTable,s=void 0===o?function(e){}:o,l=e.existingTableNumbers,u=void 0===l?[]:l,d=Object(h.a)(e,Fe),b=a.a.useContext(p),j=Object(r.useState)([]),x=Object(m.a)(j,2),O=x[0],g=x[1];Object(r.useEffect)((function(){var e;g((null!==(e=b.params.defaultTables)&&void 0!==e?e:[]).map((function(e){return e.name})).sort((function(e,t){return Me(e)-Me(t)})))}),[b.params.defaultTables]);var w=function(e){return new Promise((function(t,r){s(e),n(),S(!1),t()}))},k=Object(r.useState)(!1),y=Object(m.a)(k,2),C=y[0],S=y[1],N=a.a.useContext(Ie);return Object(v.jsx)(a.a.Fragment,{children:Object(v.jsx)(te,Object(f.a)(Object(f.a)({handleHide:n,title:"new table2",description:"start timer for a new table",disabled:!1!==C,actions:Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)($,{onClick:n,text:"cancel",disabled:!1!==C}),Object(v.jsx)(oe,{onClick:function(){n(),N.prompt({title:"table #",handleSubmit:function(e){return new Promise((function(t,n){w(e).then((function(){return t()}),(function(){return n()}))}))},handleCancel:i})},text:"custom",disabled:!1!==C})]})},d),{},{children:Object(v.jsx)("div",{className:"p-1 pt-4",children:O.filter((function(e){return!u.includes(e)})).map((function(e){return Object(v.jsx)(Y,{loading:C===e,disabled:!1!==C,onClick:function(){return S(t=e),void w(t);var t},text:e},e)}))})}))})}var Ae=["addNewTable","existingTableNumbers"];var He=function(e){var t,n=e.addNewTable,c=void 0===n?function(e){}:n,i=e.existingTableNumbers,o=void 0===i?[]:i,s=Object(h.a)(e,Ae),l=Object(Se.a)(),u=l.t,d=(l.i18n,Object(r.useState)(!1)),b=Object(m.a)(d,2),j=b[0],x=b[1],O=function(){return x(!0)};return Object(v.jsxs)(a.a.Fragment,{children:[j&&Object(v.jsx)(qe,{handleHide:function(){return x(!1)},handleShow:O,addNewTable:c,existingTableNumbers:o}),Object(v.jsx)(_,Object(f.a)(Object(f.a)({onClick:O,attributes:(t={"border-4":!0,"border-dashed":!0},Object(S.a)(t,z,!0),Object(S.a)(t,B,!0),t)},s),{},{disabled:!1,children:Object(v.jsx)("div",{className:"h-full w-full flex flex-wrap content-center text-center justify-center",children:Object(v.jsx)("p",{className:"font-mono text-4xl",children:u("new")})})}))]})},De="priority",Re="number-ascending",ze="number-descending",We=[De,Re,ze];var Ve=function(e){var t=e.sort,n=e.setSort;return Object(v.jsx)("div",{className:"p-2 inline-block",children:Object(v.jsx)("div",{onClick:function(){return n(We[(We.indexOf(t)+1)%We.length])},className:"flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full cursor-pointer bg-gray-100 hover:bg-gray-200 sm:h-8 sm:w-8",children:Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t===De?Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"}):t===Re?Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"}):Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"})})})})},Be="light",Ue="dark",Ge=[Be,Ue],Je="theme",Xe=a.a.createContext({theme:Be,setTheme:function(e){},setLight:function(){},setDark:function(){},toggle:function(){},isLight:!0,isDark:!1}),Ke=function(e){var t=e.children,n=Object(r.useState)(localStorage.getItem(Je)===Ue?Ue:Be),a=Object(m.a)(n,2),c=a[0],i=a[1],o=function(e){if(!Ge.includes(e))throw new Error("invalid theme '".concat(e,"' is not one of the valid options: '").concat(Ge,"'"));i(e),localStorage.setItem(Je,e)},s={theme:c,setTheme:o,setLight:function(){return o(Be)},setDark:function(){return o(Ue)},toggle:function(){return o(Ge[(Ge.indexOf(c)+1)%Ge.length])},isLight:c===Be,isDark:c===Ue};return Object(v.jsx)(Xe.Provider,{value:s,children:Object(v.jsx)("div",{className:c===Ue?"dark":void 0,children:t})})};function Qe(){var e=a.a.useContext(Xe);return Object(v.jsx)("div",{className:"p-2 inline-block",children:Object(v.jsx)("div",{onClick:e.toggle,className:"flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full cursor-pointer bg-gray-100 hover:bg-gray-200 sm:h-8 sm:w-8",children:Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.isLight?Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"}):Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})})}var Ye="en",Ze=[Ye,"es"],$e="language",et=a.a.createContext({language:Ye,setLanguage:function(e){},toggle:function(){}}),tt=function(e){var t=e.children,n=localStorage.getItem($e),a=Object(r.useState)(Ze.includes(n)?n:Ye),c=Object(m.a)(a,2),i=c[0],o=c[1],s=function(e){if(!Ze.includes(e))throw new Error("invalid language '".concat(e,"' is not one of the valid options: '").concat(Ze,"'"));o(e),localStorage.setItem($e,e),u.changeLanguage(e)},l={language:i,setLanguage:s,toggle:function(){return s(Ze[(Ze.indexOf(i)+1)%Ze.length])}};return Object(v.jsx)(et.Provider,{value:l,children:t})};function nt(){var e=a.a.useContext(et);return Object(v.jsx)("div",{className:"p-2 inline-block",children:Object(v.jsx)("div",{onClick:e.toggle,className:"flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full cursor-pointer bg-gray-100 hover:bg-gray-200 sm:h-8 sm:w-8",children:Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})})})})}var rt,at=n(53),ct=n.n(at),it=function(e){var t;return null!==(t=parseInt(e))&&void 0!==t?t:e},ot=(rt={},Object(S.a)(rt,De,(function(e,t){return e.last_course_datetime.toMillis()-t.last_course_datetime.toMillis()})),Object(S.a)(rt,Re,(function(e,t){return it(e.number)-it(t.number)})),Object(S.a)(rt,ze,(function(e,t){return it(t.number)-it(e.number)})),rt);function st(){var e,t=a.a.useContext(xe),n=a.a.useContext(p),c=Object(r.useState)([]),i=Object(m.a)(c,2),o=i[0],s=(i[1],Object(r.useState)(De)),l=Object(m.a)(s,2),u=l[0],d=l[1],b=Object(r.useState)(at.MENU_HOME),j=Object(m.a)(b,2),f=j[0],h=j[1],x=t.tables,O=Object(r.useState)([]),g=Object(m.a)(O,2),w=g[0],k=g[1];Object(r.useEffect)((function(){return(e=x).sort(ot[u]),void k(Object(C.a)(e));var e}),[x,u]);var y=function(){return Object(v.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5",children:[Object(v.jsx)(He,{addNewTable:t.addTable,existingTableNumbers:x.map((function(e){return e.number}))}),w.map((function(e){return Object(v.jsx)(Ce,{table:e},e.id)}))]})},S=function(){return Object(v.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5",children:o.map((function(e){return e.toString()}))})};return Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"p-2 pt-4 pl-8 pr-8 inline-block w-full",children:[Object(v.jsx)("div",{className:"inline-block",children:Object(v.jsx)("p",{className:"font-mono select-none text-4xl ".concat(B),children:null!==(e=n.params.restaurantName)&&void 0!==e?e:"..."})}),Object(v.jsxs)("div",{className:"float-right",children:[Object(v.jsx)(Ve,{sort:u,setSort:d}),Object(v.jsx)(ct.a,{menu:f,setMenu:h}),Object(v.jsx)(Qe,{}),Object(v.jsx)(nt,{})]})]}),Object(v.jsx)("div",{className:"p-4",children:f==at.MENU_HOME?Object(v.jsx)(y,{}):Object(v.jsx)(S,{})})]})}var lt=function(){return Object(v.jsx)(Oe,{children:Object(v.jsx)(st,{})})};function ut(e){var t=e.privacyFilter,n=e.setPrivacyFilter;return Object(v.jsx)("div",{className:"p-2 inline-block",children:Object(v.jsx)("div",{onClick:function(){return n(!t)},className:"flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full cursor-pointer bg-gray-100 hover:bg-gray-200 sm:h-8 sm:w-8",children:Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t?Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"}):Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"})})})})}var dt=n(94),bt=n(52);function jt(e){Object(dt.a)(e);var t=Object(je.b)(),n=t.enqueueSnackbar,r=(t.closeSnackbar,Object(b.g)()),a=Object(bt.useGoogleLogout)({clientId:"1065429339966-mnqu3d47cto138trvdeq945rj6otiu10.apps.googleusercontent.com",onLogoutSuccess:function(){new Promise((function(e,t){be()({url:"".concat("https://fb.unicohotels.com/","/auth/v1/logout"),method:"POST",headers:Object(f.a)({"Cache-Control":"no-cache"},ue())}).then((function(t){return e()})).catch((function(e){return t()}))})).then((function(){n("logged out",{variant:"success"}),r.push("/login")})).catch((function(){n("unable to log out with server",{variant:"error"})}))},onLogoutFailure:function(){n("unable to out with Google",{variant:"error"})}}).signOut;return Object(v.jsx)("div",{className:"p-2 inline-block",children:Object(v.jsx)("div",{onClick:a,className:"flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full cursor-pointer bg-gray-100 hover:bg-gray-200 sm:h-8 sm:w-8",children:Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})})}function ft(e){var t=e.title,n=void 0===t?null:t,r=e.children,a=void 0===r?null:r;return Object(v.jsxs)("div",{className:"m-4 p-4 rounded-lg ".concat(V),children:[n&&Object(v.jsx)("p",{className:"font-mono select-none text-2xl ".concat(B),children:n}),Object(v.jsx)("div",{className:"p-4",children:a})]})}var ht=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t,n){return t(e)},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t,n){return n()};return new Promise((function(r,a){be()({url:"".concat("https://fb.unicohotels.com/","/api/v1").concat(e),method:"GET",headers:Object(f.a)({"Cache-Control":"no-cache"},ue())}).then((function(e){return t(e.data,r,a)})).catch((function(e){return n(e,r,a)}))}))},mt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t,n){return t(e)},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e,t,n){return n()};return new Promise((function(a,c){be()({url:"".concat("https://fb.unicohotels.com/","/api/v1").concat(e),method:"POST",data:t,headers:Object(f.a)({"Cache-Control":"no-cache"},ue())}).then((function(e){return n(e.data,a,c)})).catch((function(e){return r(e,a,c)}))}))},vt=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e,t,n){return t(e)},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e,t,n){return n()};return new Promise((function(c,i){be()({url:"".concat("https://fb.unicohotels.com/","/api/v1").concat(e,"/").concat(t),method:"PATCH",data:n,headers:Object(f.a)({"Cache-Control":"no-cache"},ue())}).then((function(e){return r(e.data,c,i)})).catch((function(e){return a(e,c,i)}))}))},xt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t,n){return t(e)},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e,t,n){return n()};return new Promise((function(a,c){be()({url:"".concat("https://fb.unicohotels.com/","/api/v1").concat(e,"/").concat(t),method:"DELETE",headers:Object(f.a)({"Cache-Control":"no-cache"},ue())}).then((function(e){return n(e,a,c)})).catch((function(e){return r(e,a,c)}))}))},Ot=function(e){return"/restaurants/".concat(e,"/accessTokens")};function gt(e){var t=e.privacyFilter,n=e.restaurantId,r=e.token,a=e.onDelete,c=e.onPatch,i=Object(je.b)(),o=i.enqueueSnackbar,s=(i.closeSnackbar,function(){t?o("disable the privacy mode on the top right corner first",{variant:"warning"}):(navigator.clipboard.writeText(r.url),o("the url has been copied to your clipboard, keep it private!",{variant:"success"}))});return Object(v.jsx)("div",{className:"py-4",children:Object(v.jsx)(Ne.c,{initialValues:r,onSubmit:function(e,t){var a=t.setSubmitting,i=t.setErrors;(function(e,t,n){return vt(Ot(e),t,{comment:n},(function(e,t,n){return t(e.access_token)}))})(n,r.id,e.comment).then((function(e){c(r.id,e),a(!1),o("access token comment saved",{variant:"success"})}),(function(){i({comment:"unable to finalize request"}),a(!1)}))},children:function(e){var n=e.isSubmitting;return Object(v.jsxs)(Ne.b,{children:[Object(v.jsxs)("div",{className:"flex pt-2",children:[Object(v.jsx)("div",{className:"flex-grow",children:Object(v.jsx)(Le,{name:"comment"})}),Object(v.jsx)($,{text:"delete",disabled:n,onClick:a}),Object(v.jsx)(oe,{text:"save",type:"submit",disabled:n,loading:n})]}),Object(v.jsx)("div",{className:"flex pb-2",children:Object(v.jsx)("div",{className:"flex-grow ".concat(t?"filter blur-sm":""),onClick:s,children:Object(v.jsx)(Le,{name:"url",disabled:!0})})})]})}})})}var pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(r.useState)(t),a=Object(m.a)(n,2),c=a[0],i=a[1],o=function(e){return i([].concat(Object(C.a)(c),[e]))},s=function(t){return i(c.filter((function(n){return n[e]!==t})))},l=function(t,n){return i(c.map((function(r){return r[e]===t?n:r})))};return[c,i,{add:o,remove:s,patch:l}]},wt=function(e){var t=e.restaurantId,n=e.privacyFilter,c=pt(),i=Object(m.a)(c,3),o=i[0],s=i[1],l=i[2],u=Object(je.b)(),d=u.enqueueSnackbar,b=(u.closeSnackbar,a.a.useContext(ae)),j=a.a.useContext(Ie);Object(r.useEffect)((function(){(function(e){return ht(Ot(e),(function(e,t,n){return t(e.access_tokens)}))})(t).then((function(e){return s(e)})).catch((function(e){return d("unable to retrieve access tokens",{variant:"error"})}))}),[t]);var f=function(e){b({title:"Do you want to delete the access token?",description:"Deleting the access token will render that url invalid (even for people who already had it).",handleSuccess:function(){(function(e,t){return xt(Ot(e),t)})(t,e).then((function(){l.remove(e),d("deleted access token",{variant:"success"})})).catch((function(){d("unable to delete access token",{variant:"error"})}))}})},h=function(e,t){l.patch(e,t)};return Object(v.jsxs)(ft,{title:"access URLs",children:[Object(v.jsx)("div",{className:"grid grid-cols-1 divide-y divide-gray-500 dark:divide-gray-100",children:o.map((function(e){return Object(v.jsx)(gt,{onPatch:h,restaurantId:t,privacyFilter:n,onDelete:function(){return f(e.id)},token:e},e.id)}))}),Object(v.jsx)("div",{className:"grid justify-items-center  pt-8",children:Object(v.jsx)(oe,{onClick:function(){j.prompt({title:"description",description:"write a small description of the uses of this url (good examples would include who will this access url be given to, or which team will have access to it)",handleSubmit:function(e){return new Promise((function(n,r){(function(e,t){return mt(Ot(e),{comment:t},(function(e,t,n){return t(e.access_token)}))})(t,e).then((function(e){l.add(e),d("added new default table",{variant:"success"}),n()})).catch((function(){d("unable to add new default table",{variant:"error"}),r()}))}))}})},text:"new",w:"w-64"})})]})},kt=function(e){return"/restaurants/".concat(e,"/defaultTables")},yt=function(e){var t=e.restaurantId,n=pt("name"),c=Object(m.a)(n,3),i=c[0],o=c[1],s=c[2],l=Object(je.b)(),u=l.enqueueSnackbar,d=(l.closeSnackbar,Object(r.useState)(null)),b=Object(m.a)(d,2),j=b[0],f=b[1];Object(r.useEffect)((function(){(function(e){return ht(kt(e),(function(e,t,n){return t(e.default_tables)}))})(t).then((function(e){return o(e)})).catch((function(e){return u("unable to retrieve default tables",{variant:"error"})}))}),[t]);var h=a.a.useContext(ae),x=a.a.useContext(Ie),O=function(e){h({title:"Do you want to delete Table ".concat(e,"?"),description:"Deleting Table ".concat(e," will only remove it from the default tables list."),handleSuccess:function(){f(e),function(e,t){return xt(kt(e),t)}(t,e).then((function(){s.remove(e),u("deleted default table",{variant:"success"})})).catch((function(){u("unable to delete default table",{variant:"error"})})).finally((function(){return f(null)}))}})};return Object(v.jsxs)(ft,{title:"default tables",children:[i.map((function(e){return Object(v.jsx)(Y,{onClick:function(){return O(e.name)},text:e.name,loading:j===e.name},e.name)})),Object(v.jsx)(oe,{onClick:function(){x.prompt({title:"table #",description:"what is the name of the new table you want to add?",handleSubmit:function(e){return new Promise((function(n,r){(function(e,t){return mt(kt(e),{name:t},(function(e,t,n){return t(e.default_table)}))})(t,e).then((function(e){s.add(e),u("added new default table",{variant:"success"}),n()})).catch((function(){u("unable to add new default table",{variant:"error"}),r()}))}))}})},text:"ADD NEW"})]})};function Ct(e){var t=e.admin,n=e.privacyFilter,r=e.deleteAdministrator,c=e.deleteAdministratorService,i=Object(je.b)(),o=i.enqueueSnackbar,s=(i.closeSnackbar,a.a.useContext(ae)),l=function(){s({handleSuccess:function(){c(t.id).then((function(){r(t.id),o("administrator deleted",{variant:"success"})})).catch((function(){o("unable to delete administrator",{variant:"error"})}))},handleCancel:function(){o("administrator not deleted",{variant:"success"})}})};return Object(v.jsx)("div",{className:"py-4",children:Object(v.jsx)(Ne.c,{initialValues:t,onSubmit:function(e,t){t.setSubmitting,t.setErrors},children:function(e){var t=e.isSubmitting;return Object(v.jsx)(Ne.b,{children:Object(v.jsxs)("div",{className:"flex pt-2",children:[Object(v.jsx)("div",{className:"flex-grow ".concat(n?"filter blur-sm":""),children:Object(v.jsx)(Le,{disabled:!0,name:"email"})}),Object(v.jsx)($,{text:"delete",onClick:l,disabled:t})]})})}})})}var St=function(e){return"/restaurants/".concat(e,"/administrators")},Nt=function(e){var t=e.restaurantId,n=e.privacyFilter,c=pt(),i=Object(m.a)(c,3),o=i[0],s=i[1],l=i[2],u=Object(je.b)(),d=u.enqueueSnackbar,b=(u.closeSnackbar,a.a.useContext(Ie));Object(r.useEffect)((function(){(function(e){return ht(St(e),(function(e,t,n){return t(e.administrators)}))})(t).then((function(e){return s(e)})).catch((function(e){return d("unable to retrieve restaurant administrators",{variant:"error"})}))}),[t]);return Object(v.jsxs)(ft,{title:"restaurant administrators",children:[Object(v.jsx)("div",{className:"grid grid-cols-1 divide-y divide-gray-500",children:o.map((function(e){return Object(v.jsx)(Ct,{admin:e,privacyFilter:n,deleteAdministrator:l.remove,deleteAdministratorService:function(e){return function(e,t){return xt(St(e),t)}(t,e)}},e.id)}))}),Object(v.jsx)("div",{className:"grid justify-items-center  pt-8",children:Object(v.jsx)(oe,{onClick:function(){b.prompt({title:"administrator email",description:"this will add a new administrator to the system; restaurant administrators can manage the access urls of their restaurants and the default tables",handleSubmit:function(e){return new Promise((function(n,r){(function(e,t){return mt(St(e),{email:t},(function(e,t,n){return t(e.administrator)}))})(t,e).then((function(e){l.add(e),d("added new restaurant administrator",{variant:"success"}),n()})).catch((function(){d("unable to add new restaurant administrator",{variant:"error"}),r()}))}))},handleCancel:function(){return d("cancelled",{variant:"warning"})}})},text:"ADD NEW",w:"w-64"})})]})},Tt="/restaurants",Lt=function(e,t){return vt(Tt,e,t,(function(e,t,n){return t(e.restaurant)}))};function Et(e){var t=e.restaurantId,n=e.prefix,r=e.onPatch,a=e.profileName,c=e.profileValue,i=Object(je.b)().enqueueSnackbar;return Object(v.jsx)("div",{className:"py-4",children:Object(v.jsx)(Ne.c,{initialValues:{profile:c},enableReinitialize:!0,onSubmit:function(e,n){var c=n.setSubmitting,o=n.setErrors,s=e.profile;Lt(t,Object(S.a)({},a,s)).then((function(e){r(e[a]),c(!1),i("time profile saved",{variant:"success"})}),(function(){o({comment:"unable to finalize request"}),c(!1)}))},children:function(e){var t=e.isSubmitting;return Object(v.jsx)(Ne.b,{children:Object(v.jsxs)("div",{className:"flex pt-2",children:[Object(v.jsx)("div",{className:"flex-grow",children:Object(v.jsx)(Le,{name:"profile"})}),Object(v.jsx)(oe,{text:"save ".concat(n),w:"w-32",type:"submit",disabled:t,loading:t})]})})}})})}var Pt=function(e){var t=e.restaurantId,n=Object(je.b)().enqueueSnackbar,a=Object(r.useState)({alarm_minutes:20,warning_minutes:15}),c=Object(m.a)(a,2),i=c[0],o=c[1];return Object(r.useEffect)((function(){var e;(e=t,ht("".concat(Tt,"/").concat(e),(function(e,t,n){return t(e.restaurant)}))).then((function(e){return o({alarm_minutes:e.alarm_minutes,warning_minutes:e.warning_minutes})})).catch((function(){return n("unable to retrieve restaurant",{variant:"error"})}))}),[t]),Object(v.jsx)(ft,{title:"time profile",children:Object(v.jsxs)("div",{className:"grid grid-cols-1 divide-y divide-gray-500 dark:divide-gray-100",children:[Object(v.jsx)(Et,{onPatch:function(e){return o(Object(f.a)(Object(f.a)({},i),{},{alarm_minutes:e}))},restaurantId:t,profileValue:i.alarm_minutes,profileName:"alarm_minutes",prefix:"alarm"}),Object(v.jsx)(Et,{onPatch:function(e){return o(Object(f.a)(Object(f.a)({},i),{},{warning_minutes:e}))},restaurantId:t,profileValue:i.warning_minutes,profileName:"warning_minutes",prefix:"warning"})]})})};var It=function(e){var t=e.privacyFilter,n=e.restaurant,r=a.a.useContext(p);return Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)(yt,{restaurantId:n.id}),Object(v.jsx)(wt,{privacyFilter:t,restaurantId:n.id}),Object(v.jsx)(Pt,{restaurantId:n.id}),r.isSuperAdminLoggedIn&&Object(v.jsx)(Nt,{privacyFilter:t,restaurantId:n.id})]})},_t="/administrators/super",Ft=function(e){return xt(_t,e)},Mt=function(e){var t=e.privacyFilter,n=pt(),c=Object(m.a)(n,3),i=c[0],o=c[1],s=c[2],l=Object(je.b)(),u=l.enqueueSnackbar,d=(l.closeSnackbar,a.a.useContext(Ie));Object(r.useEffect)((function(){ht(_t,(function(e,t,n){return t(e.administrators)})).then((function(e){return o(e)})).catch((function(e){return u("unable to retrieve root administrators",{variant:"error"})}))}),[]);return Object(v.jsxs)(ft,{title:"root administrators",children:[Object(v.jsx)("div",{className:"grid grid-cols-1 divide-y divide-gray-500",children:i.map((function(e){return Object(v.jsx)(Ct,{admin:e,privacyFilter:t,deleteAdministrator:s.remove,deleteAdministratorService:Ft},e.id)}))}),Object(v.jsx)("div",{className:"grid justify-items-center  pt-8",children:Object(v.jsx)(oe,{onClick:function(){d.prompt({title:"administrator email",description:"this will add a new root administrator to the system; root administrators have complete access to all restaurants and users (including other administrators)",handleSubmit:function(e){return new Promise((function(t,n){(function(e){return mt(_t,{email:e},(function(e,t,n){return t(e.administrator)}))})(e).then((function(e){s.add(e),u("added new root administrator",{variant:"success"}),t()})).catch((function(){u("unable to add new root administrator",{variant:"error"}),n()}))}))},handleCancel:function(){return u("cancelled",{variant:"warning"})}})},text:"ADD NEW",w:"w-64"})})]})};function qt(e){var t=e.restaurant,n=e.setRestaurant,r=e.patchRestaurant,c=e.deleteRestaurant,i=Object(je.b)(),o=i.enqueueSnackbar,s=(i.closeSnackbar,a.a.useContext(ae)),l=function(){s({handleSuccess:function(){var e;(e=t.id,xt(Tt,e)).then((function(){c(t.id),o("restaurant deleted",{variant:"success"})})).catch((function(){o("unable to delete restaurant",{variant:"error"})}))},handleCancel:function(){o("restaurant not deleted",{variant:"success"})}})},u=function(){return n(t)};return Object(v.jsx)("div",{className:"py-4",children:Object(v.jsx)(Ne.c,{initialValues:t,onSubmit:function(e,n){var a=n.setSubmitting,c=n.setErrors;Lt(t.id,{name:e.name}).then((function(e){r(t.id,e),a(!1),o("restaurant name saved",{variant:"success"})}),(function(){c({comment:"unable to finalize request"}),a(!1)}))},children:function(e){var t=e.isSubmitting;return Object(v.jsx)(Ne.b,{children:Object(v.jsxs)("div",{className:"flex pt-2",children:[Object(v.jsx)("div",{className:"flex-grow",children:Object(v.jsx)(Le,{name:"name"})}),Object(v.jsx)($,{text:"delete",onClick:l,disabled:t}),Object(v.jsx)(oe,{text:"save",type:"submit",disabled:t,loading:t}),Object(v.jsx)(Y,{text:"admin",onClick:u,disabled:t})]})})}})})}var At=function(e){var t=e.setRestaurant,n=pt(),c=Object(m.a)(n,3),i=c[0],o=c[1],s=c[2],l=Object(je.b)(),u=l.enqueueSnackbar,d=(l.closeSnackbar,a.a.useContext(Ie));Object(r.useEffect)((function(){ht(Tt,(function(e,t,n){return t(e.restaurants)})).then((function(e){return o(e)})).catch((function(e){return u("unable to retrieve restaurants",{variant:"error"})}))}),[]);return Object(v.jsxs)(ft,{title:"restaurants",children:[Object(v.jsx)("div",{className:"grid grid-cols-1 divide-y divide-gray-500",children:i.map((function(e){return Object(v.jsx)(qt,{patchRestaurant:s.patch,deleteRestaurant:s.remove,restaurant:e,setRestaurant:t},e.id)}))}),Object(v.jsx)("div",{className:"grid justify-items-center pt-8",children:Object(v.jsx)(oe,{onClick:function(){d.prompt({title:"restaurant name",description:"this will add a new restaurant to the system",handleSubmit:function(e){return new Promise((function(t,n){(function(e){return mt(Tt,{name:e},(function(e,t,n){return t(e.restaurant)}))})(e).then((function(e){s.add(e),u("added new restaurant",{variant:"success"}),t()})).catch((function(){u("unable to add new restaurant",{variant:"error"}),n()}))}))},handleCancel:function(){return u("cancelled",{variant:"warning"})}})},text:"ADD NEW",w:"w-64"})})]})};var Ht=function(e){var t=e.privacyFilter,n=e.setRestaurant;return Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)(At,{setRestaurant:n}),Object(v.jsx)(Mt,{privacyFilter:t})]})};function Dt(e){var t=e.setRestaurant;return Object(v.jsx)("div",{className:"p-2 inline-block",children:Object(v.jsx)("div",{onClick:function(){return t(null)},className:"flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full cursor-pointer bg-gray-100 hover:bg-gray-200 sm:h-8 sm:w-8",children:Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 15l-3-3m0 0l3-3m-3 3h8M3 12a9 9 0 1118 0 9 9 0 01-18 0z"})})})})}var Rt=function(){var e,t=a.a.useContext(p),n=Object(r.useState)(!0),c=Object(m.a)(n,2),i=c[0],o=c[1],s=Object(r.useState)(null),l=Object(m.a)(s,2),u=l[0],d=l[1];return Object(r.useEffect)((function(){null!==t.params.restaurantId?d({id:t.params.restaurantId,name:t.params.restaurantName}):d(null)}),[t.params]),Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"p-2 pl-8 pr-8",children:[Object(v.jsx)("div",{className:"inline-block",children:Object(v.jsx)("p",{className:"font-mono text-4xl ".concat(B),children:t.isSuperAdminLoggedIn&&null===u?"root admin":null!==(e=u.name)&&void 0!==e?e:"..."})}),Object(v.jsxs)("div",{className:"float-right",children:[t.isSuperAdminLoggedIn&&null!==u&&Object(v.jsx)(Dt,{setRestaurant:d}),Object(v.jsx)(Qe,{}),Object(v.jsx)(nt,{}),Object(v.jsx)(ut,{privacyFilter:i,setPrivacyFilter:o}),Object(v.jsx)(jt,{})]})]}),Object(v.jsx)("div",{className:"inline-block w-full",children:t.isRestaurantAdminLoggedIn||null!==u?Object(v.jsx)(It,{privacyFilter:i,restaurant:u}):Object(v.jsx)(Ht,{privacyFilter:i,setRestaurant:d})})]})};var zt=function(){var e=Object(je.b)().enqueueSnackbar,t=a.a.useContext(p),n=Object(b.g)(),r=Object(b.h)();return Object(v.jsx)("div",{className:"flex items-center justify-center h-screen",children:Object(v.jsx)(bt.GoogleLogin,{clientId:"1065429339966-mnqu3d47cto138trvdeq945rj6otiu10.apps.googleusercontent.com",buttonText:"Login",onSuccess:function(a){var c;(c=a.tokenObj.id_token,new Promise((function(e,t){be()({url:"".concat("https://fb.unicohotels.com/","/auth/v1/login/google"),method:"POST",auth:{username:"",password:c},headers:Object(f.a)({"Cache-Control":"no-cache"},ue())}).then((function(t){return e([!0,t.data])})).catch((function(n){try{401===n.response.status&&e(!1)}catch(r){}t(n)}))}))).then((function(a){var c=Object(m.a)(a,2),i=c[0],o=c[1];if(i){t.setType(o.type),t.setParams(o);var s=(r.state||{from:{pathname:"/admin"}}).from;n.push(s),e("logged in",{variant:"success"})}else e("user does not exist",{variant:"warning"})})).catch((function(){e("unable to log in with the server",{variant:"error"})}))},onFailure:function(t){e("unable to log in with Google",{variant:"error"})},cookiePolicy:"single_host_origin"})})};var Wt=function(){var e=a.a.createRef();return Object(v.jsx)(Ke,{children:Object(v.jsx)("div",{className:"App ".concat(D," min-h-screen min-w-screen"),children:Object(v.jsx)(tt,{children:Object(v.jsx)(je.a,{children:Object(v.jsx)(w,{children:Object(v.jsx)(ce,{children:Object(v.jsx)(_e,{children:Object(v.jsx)(d.a,{ref:e,basename:"/app",children:Object(v.jsxs)(b.d,{children:[Object(v.jsx)(y,{path:"/admin",baseRouter:e,component:Rt,type:[O,g]}),Object(v.jsx)(b.b,{path:"/restaurant",component:lt}),Object(v.jsx)(b.b,{path:"/login",component:zt}),Object(v.jsx)(b.b,{component:j})]})})})})})})})})})},Vt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,178)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(Wt,{})}),document.getElementById("root")),Vt()},53:function(e,t){}},[[165,1,2]]]);
//# sourceMappingURL=main.d24bd1e3.chunk.js.map